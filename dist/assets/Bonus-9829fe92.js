import{_ as k,d as f,z as p,k as b,S as v,o as r,c as o,a as e,m as h,v as m,s as y,F as g,l as x,t as d,h as w,g as _,p as B,i as F}from"./index-62e784bc.js";const C={name:"Member.History",setup(){return{authStore:f()}},data(){return{report:{data:[]},isRequest:!1,filter:""}},computed:{reportDataFilter(){return this.filter?this.report.data.filter(n=>n.type==this.filter):this.report.data}},created(){this.getReport("rewards"),this.setFilter("game")},methods:{async getReport(n){try{this.isRequest=!0;const{data:a}=await p.post("https://demo.code-enging.com/member/menu/reports",{action:n},{headers:{Authorization:`${b.get("accessToken")}`}});a.error?alert(a.error.msg):this.report=a}catch(a){alert(a.message),this.$store.push("/member")}finally{this.isRequest=!1}},async redeemBonus(n,a){try{this.isRequest=!0;const u={action:"rewards",token:n,bonus:a,username:this.report.username},{data:c}=await p.post("https://demo.code-enging.com/member/getBonus",u,{headers:{Authorization:`${b.get("accessToken")}`}});c.error?alert(c.error.msg):(v.fire("เรียบร้อย",c.message,c.status),this.getReport("rewards"))}catch(u){alert(u.message),this.$store.push("/member")}finally{this.isRequest=!1}},convertBonusTextType(n){switch(n){case"game":return"เกมส์";case"cashback":return"คอมมิสชั่น";case"admin":return"โปรโมรชั่น";case"mlm":return"พันธมิตร";default:return n}},setFilter(n){this.filter=n}}},t=n=>(B("data-v-aae96670"),n=n(),F(),n),R=t(()=>e("br",null,null,-1)),S=t(()=>e("br",null,null,-1)),q={class:"container"},T={class:"card card-member"},z={class:"card-body text-dark"},D=t(()=>e("h2",null,"รายการโบนัส",-1)),I={class:"card bg-light card-member"},$={class:"px-1 py-1 text-center"},A={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic radio toggle button group"},N=t(()=>e("input",{type:"radio",class:"btn-check",name:"rd",id:"game",checked:""},null,-1)),V=t(()=>e("input",{type:"radio",class:"btn-check",name:"rd",id:"cashback"},null,-1)),L=t(()=>e("input",{type:"radio",class:"btn-check",name:"rd",id:"admin"},null,-1)),E=t(()=>e("input",{type:"radio",class:"btn-check",name:"rd",id:"mlm"},null,-1)),H=t(()=>e("input",{type:"radio",class:"btn-check",name:"rd",id:"b1"},null,-1)),M={class:"text-center my-3"},j=t(()=>e("div",{class:"spinner-border text-secondary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)),G=[j],J={class:"card-body text-dark text-center px-0"},K={class:"table table-sm"},O=t(()=>e("th",{scope:"col",class:"text-start"},"วันที่ทำรายการ",-1)),P={scope:"col",class:"text-end"},Q={key:0},U=t(()=>e("th",{scope:"col"},"รายการ",-1)),W={class:"text-start"},X={class:"text-end"},Y=["onClick"],Z={key:1,class:"text-danger"},ee=t(()=>e("i",{class:"fa fa-times-circle","aria-hidden":"true"},null,-1)),te={key:2},se=t(()=>e("button",{class:"btn btn-sm btn-secondary",disabled:""},"รับโบนัส",-1)),ne=t(()=>e("br",null,null,-1)),ae={key:0,class:"text-danger"},re=t(()=>e("br",{class:"d-sm-none"},null,-1)),oe={key:3,class:"text-success"},le=t(()=>e("i",{class:"fa fa-check-circle","aria-hidden":"true"},null,-1)),ce=t(()=>e("br",null,null,-1)),ie=t(()=>e("br",null,null,-1)),de=t(()=>e("br",null,null,-1)),ue=t(()=>e("br",null,null,-1)),_e=t(()=>e("br",null,null,-1));function he(n,a,u,c,i,l){return r(),o(g,null,[R,S,e("div",q,[e("div",T,[e("div",z,[D,e("div",I,[e("div",$,[e("div",A,[N,e("label",{class:"btn btn-outline-primary",for:"game",onClick:a[0]||(a[0]=s=>l.setFilter("game"))},"เกมส์"),V,e("label",{class:"btn btn-outline-primary",for:"cashback",onClick:a[1]||(a[1]=s=>l.setFilter("cashback"))},"คอมมิสชั่น"),L,e("label",{class:"btn btn-outline-primary",for:"admin",onClick:a[2]||(a[2]=s=>l.setFilter("admin"))},"โปรโมรชั่น"),E,e("label",{class:"btn btn-outline-primary",for:"mlm",onClick:a[3]||(a[3]=s=>l.setFilter("mlm"))},"พันธมิตร"),H,e("label",{class:"btn btn-outline-primary",for:"b1",onClick:a[4]||(a[4]=s=>l.setFilter(""))},"ทั้งหมด")])]),h(e("div",M,G,512),[[m,i.isRequest]]),h(e("div",J,[e("table",K,[e("thead",null,[e("tr",null,[O,e("th",P,[i.report.data?(r(),o("span",Q,"เครดิต")):y("",!0)]),U])]),e("tbody",null,[(r(!0),o(g,null,x(l.reportDataFilter,s=>(r(),o("tr",{key:s.key,style:{"font-size":"10pt"}},[e("td",W,d(n.$filters.moment(s.time)),1),e("td",X,d(n.toCurrency(s.bonus||s.amount))+" ฿",1),e("td",null,[e("span",{class:w(["badge",s.type=="ฝาก"?"bg-info":"bg-warning text-dark"])},d(l.convertBonusTextType(s.type)),3),h(e("small",null,"("+d(s.bank)+")",513),[[m,s.bank]])]),e("td",null,[s.status==0&&s.token!=""&&s.token?(r(),o("button",{key:0,class:"btn btn-sm btn-success",onClick:me=>l.redeemBonus(s.token,s.bonus)}," รับโบนัส ",8,Y)):s.status==2?(r(),o("span",Z,[ee,_(" สละสิทธิ์ ")])):s.status==4?(r(),o("div",te,[se,ne,i.report.notice?(r(),o("small",ae,[_(" ช่วงเวลารับ "),re,_(" "+d(i.report.notice),1)])):y("",!0)])):(r(),o("span",oe,[le,_(" รับแล้ว ")]))])]))),128))])])],512),[[m,!i.isRequest]])])])])]),ce,ie,de,ue,_e],64)}const be=k(C,[["render",he],["__scopeId","data-v-aae96670"]]);export{be as default};
