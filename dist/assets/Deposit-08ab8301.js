import{_ as g,u as P,B as D,S as C,o as c,c as u,a as t,n as w,t as a,e as S,C as I,r as B,m as b,v as _,F as v,l as k,q as A,g as p,s as y,x as T,h as f,f as U,p as j,i as L}from"./index-05c23007.js";const M={props:{bankData:Object},setup(){return{userstore:P()}},computed:{BankIcon(){return D.find(({code:s})=>s==this.bankData.code)}},methods:{copy(s){let e=document.getElementById(s);if(e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),s!="suggest"){let d=this.userstore.userProfile.deposit[1].total,r=this.userstore.userProfile.deposit[2].total,o="";d==0&&r==0&&(o+=`<a href="https://lin.ee/iu86dLo"><img class="w-100" src="/cdn/firstmember.jpg?v=${Date.now()}"/></a>`),C.fire({title:"คัดลอกเลขบัญชีแล้ว",html:o})}}}},N={class:"row"},R={class:"col-auto px-0 mx-0 text-center"},F=["src"],V=t("br",null,null,-1),q={class:"text-dark"},E={class:"col"},Q=t("label",{for:""},"เลขที่บัญชี",-1),z={class:"input-group mb-3"},K=["id","value"],O={class:"text-secondary"},W=t("hr",null,null,-1);function G(s,e,d,r,o,l){return c(),u("div",null,[t("div",N,[t("div",R,[t("img",{src:l.BankIcon.icon,style:w([{"background-color":l.BankIcon.color},{width:"64px"}]),class:"img-fluid rounded"},null,12,F),V,t("span",q,a(l.BankIcon.name),1)]),t("div",E,[Q,t("div",z,[t("input",{type:"text",class:"form-control",readonly:"",id:"banknumber"+d.bankData.code,value:d.bankData.account},null,8,K),t("button",{onClick:e[0]||(e[0]=h=>l.copy("banknumber"+d.bankData.code)),class:"btn btn-outline-secondary"},"คัดลอก")])])]),t("h4",O,"ชื่อบัญชี: "+a(d.bankData.name),1),W])}const H=g(M,[["render",G]]),J="/assets/popup-2-289a2c50.webp";const X={name:"Member.Deposit",setup(){const s=P(),e=S();return{userStore:s,option:e}},data(){return{isRequest:!1,bankData:null,deposit_amount:300,deposit_amount_float:0,step:0,countdown_time:0,selectPromotionId:null,useQrCode:!1,UserdataPayload:{},promtpay:{amb:"0918403367",ufa:"0889571029"},usePromotion:!0}},computed:{promotionList(){let s=this.option.getPromotions;return s.data=s.data.filter(e=>this.userStore.userProfile.role==0&&e.promotion_type=="newmember"||this.userStore.userProfile.role!=0&&e.promotion_type=="member"||e.promotion_type=="allmember"),s}},components:{BankDeposit:H},created(){this.bankData=this.userStore.userProfile.deposit[this.userStore.selector.num]??null,this.bankData.promtpay=this.promtpay[this.userStore.selector.text],this.userStore.postChangeUserAgent()},mounted(){this.option.getPromotion_Deposit(),this.deposit_amount_float=this.genRand(.01,.99,2);const s=document.getElementById("carosel_promo1");new I(s,{touch:!0})},methods:{setUsePromotion(s){this.usePromotion=s},clearProcess(){this.step=1,this.countdown_time=0},selectBank(s){s.code!="TRUE"?this.useQrCode=!0:this.useQrCode=!1,this.countdown_time=180,this.countDownTimer(),this.step=3;let e={proId:this.selectPromotionId,bankCode:this.userStore.userProfile.bankCode,bankAccount:this.userStore.userProfile.bankAccount,ag:1,tranferAcc:s.account,bankData:s,amount:this.toCurrency(this.deposit_amount+this.deposit_amount_float)};this.UserdataPayload=e,this.userStore.depositWithPromotion(e)},confirmPromotion(){this.usePromotion&&this.selectPromotionId==null?C.fire({icon:"error",title:"กรุณาเลือกโปรโมชั่น",confirmButtonText:"ตกลง",customClass:{confirmButton:"btn -submit mx-1",cancelButton:"btn -cancel mx-1"}}):this.step=2},selectPromotion(s){s!=null?(this.selectPromotionId=s.id,this.deposit_amount=s.min):this.selectPromotionId=null},setDepositAmount(s){this.deposit_amount=s},genRand(s,e,d){var r=Math.random()*(e-s)+s,o=Math.pow(10,d);return Math.floor(r*o)/o},countDownTimer(){this.countdown_time>0?setTimeout(()=>{this.countdown_time-=1,this.countDownTimer()},1e3):this.step=1}}},i=s=>(j("data-v-57c7c7cb"),s=s(),L(),s),Y={class:"container mb-5"},Z={class:"row"},$={class:"col-lg-6 m-md-auto col-sm-12 col-12"},tt={class:"card px-0 mt-5 card-member"},et={class:"card-body text-dark"},st=i(()=>t("h2",{class:"text-center"},"ฝากเงิน",-1)),ot=i(()=>t("img",{src:J,alt:"",class:"img-fluid mb-3"},null,-1)),nt={class:"nav nav-tabs nav-justified",id:"myTab",role:"tablist"},lt={class:"nav-item",role:"presentation"},it={class:"nav-item",role:"presentation"},rt={class:"tab-content mb-5",id:"myTabContent"},at={class:"tab-pane fade show active",id:"pro-tab-pane",role:"tabpanel","aria-labelledby":"pro-tab",tabindex:"0"},ct={class:"row mb-4 mt-3"},dt={id:"carosel_promo1",class:"carousel slide"},ut={class:"carousel-indicators"},mt=["data-bs-slide-to"],bt={class:"carousel-inner"},_t=i(()=>t("i",{class:"fa fa-times"},null,-1)),pt=[_t],ht=["onClick"],vt=["src"],kt={class:"px-2"},ft={class:"tab-pane fade",id:"nonpro-tab-pane",role:"tabpanel","aria-labelledby":"nonpro-tab",tabindex:"0"},yt=i(()=>t("br",null,null,-1)),gt={class:"-x-input-icon x-input-operator mb-3 flex-column"},Pt=["disabled"],Ct=i(()=>t("i",{class:"fa fa-minus-circle"},null,-1)),wt=[Ct],xt=["readonly"],Dt=["disabled"],St=i(()=>t("i",{class:"fa fa-plus-circle"},null,-1)),It=[St],Bt={class:"row my-3"},At=["disabled"],Tt=["disabled"],Ut=["disabled"],jt={class:"row my-3"},Lt=["disabled"],Mt=["disabled"],Nt=["disabled"],Rt=i(()=>t("br",null,null,-1)),Ft={class:"card bg-light"},Vt={key:0,class:"card-body text-dark"},qt=["onClick"],Et={class:"text-danger"},Qt=i(()=>t("span",null,null,-1)),zt=i(()=>t("br",null,null,-1)),Kt=i(()=>t("br",null,null,-1)),Ot={class:"text-center"},Wt={class:"h1 text-danger"},Gt={class:"text-start mt-2"},Ht={class:"text-danger"},Jt={class:"progress",role:"progressbar"},Xt=i(()=>t("br",null,null,-1)),Yt={class:"text-danger"},Zt=i(()=>t("span",null,null,-1)),$t=i(()=>t("br",null,null,-1)),te=i(()=>t("br",null,null,-1)),ee=i(()=>t("br",null,null,-1)),se=i(()=>t("br",null,null,-1)),oe=i(()=>t("br",null,null,-1));function ne(s,e,d,r,o,l){const h=B("BankDeposit");return c(),u("div",null,[t("div",Y,[t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[st,b(t("div",null,[ot,t("button",{onClick:e[0]||(e[0]=()=>o.step=1),class:"btn -submit w-100"},"ฝากเงิน")],512),[[_,o.step==0]]),b(t("div",null,[t("ul",nt,[t("li",lt,[t("a",{class:"nav-link w-100 active",id:"pro-tab",onClick:e[1]||(e[1]=n=>l.setUsePromotion(!0)),"data-bs-toggle":"tab","data-bs-target":"#pro-tab-pane",role:"tab"},"รับโปรโมชั่น")]),t("li",it,[t("a",{class:"nav-link w-100",id:"nonpro-tab",onClick:e[2]||(e[2]=()=>{l.selectPromotion(null),l.setUsePromotion(!1)}),"data-bs-toggle":"tab","data-bs-target":"#nonpro-tab-pane",role:"tab"},"ไม่รับรับโปรโมชั่น")])]),t("div",rt,[t("div",at,[t("div",ct,[t("div",dt,[t("div",ut,[(c(!0),u(v,null,k(l.promotionList.data,(n,m)=>(c(),u("button",{key:m,class:f(m==0?"active":""),type:"button","data-bs-target":"#carosel_promo1","data-bs-slide-to":m,"aria-current":"true"},a(m+1),11,mt))),128))]),t("div",bt,[(c(!0),u(v,null,k(l.promotionList.data,(n,m)=>(c(),u("div",{key:m,class:f(["carousel-item",m==0?"active":""])},[t("div",{class:f(["card m-3",{selected:o.selectPromotionId==n.id}])},[t("a",{onClick:e[3]||(e[3]=x=>l.selectPromotion(null))},pt),t("div",{class:"card-body p-0",onClick:x=>l.selectPromotion(n)},[t("img",{src:l.promotionList.host+n.imgdesc,alt:"",class:"img-fluid"},null,8,vt),t("p",kt,a(n.desc),1)],8,ht)],2)],2))),128))])])])]),t("div",ft,[yt,t("div",gt,[t("button",{type:"button",class:"-icon-left -btn-icon js-adjust-amount-by-operator",onClick:e[4]||(e[4]=n=>o.deposit_amount-=10),disabled:o.selectPromotionId},wt,8,Pt),b(t("input",{type:"number",required:"","onUpdate:modelValue":e[5]||(e[5]=n=>o.deposit_amount=n),class:"x-form-control text-center form-control",placeholder:"เงินฝากขั้นต่ำ 100",onKeypress:e[6]||(e[6]=n=>s.isNumber(n)),readonly:o.selectPromotionId},null,40,xt),[[A,o.deposit_amount]]),t("button",{type:"button",class:"-icon-right -btn-icon js-adjust-amount-by-operator",onClick:e[7]||(e[7]=n=>o.deposit_amount+=10),disabled:o.selectPromotionId},It,8,Dt)]),t("div",Bt,[t("button",{class:"btn col btn-danger mx-2",onClick:e[8]||(e[8]=n=>l.setDepositAmount(100)),disabled:o.selectPromotionId},"100",8,At),t("button",{class:"btn col btn-danger mx-2",onClick:e[9]||(e[9]=n=>l.setDepositAmount(300)),disabled:o.selectPromotionId},"300",8,Tt),t("button",{class:"btn col btn-danger mx-2",onClick:e[10]||(e[10]=n=>l.setDepositAmount(500)),disabled:o.selectPromotionId},"500",8,Ut)]),t("div",jt,[t("button",{class:"btn col btn-danger mx-2",onClick:e[11]||(e[11]=n=>l.setDepositAmount(1e3)),disabled:o.selectPromotionId},"1,000",8,Lt),t("button",{class:"btn col btn-danger mx-2",onClick:e[12]||(e[12]=n=>l.setDepositAmount(2e3)),disabled:o.selectPromotionId},"2,000",8,Mt),t("button",{class:"btn col btn-danger mx-2",onClick:e[13]||(e[13]=n=>l.setDepositAmount(5e3)),disabled:o.selectPromotionId},"5,000",8,Nt)]),Rt])]),t("button",{onClick:e[14]||(e[14]=n=>l.confirmPromotion()),class:"btn -submit w-100"},"ยืนยัน")],512),[[_,o.step==1]]),b(t("div",null,[b(t("div",Ft,[o.bankData.banks?(c(),u("div",Vt,[(c(!0),u(v,null,k(o.bankData.banks,n=>(c(),u("div",{key:n.key},[b(U(h,{bankData:n},null,8,["bankData"]),[[_,!n.suspend]]),t("button",{onClick:m=>l.selectBank(n),class:"btn btn-info w-100 mb-4"},"เลือกธนาคาร",8,qt)]))),128)),t("small",Et,[p(" **กรุณาใช้บัญชี "),t("b",null,a(s.toBankFormat(r.userStore.userProfile.bankAccount))+" ("+a(r.userStore.userProfile.name+" "+r.userStore.userProfile.lastname)+")",1),p(" ในการโอนเงินเท่านั้นไม่เช่นนั้นเครดิตจะไม่เข้าบัญชี หากมีปัญหากรุณาติดต่อทีมงาน "),Qt])])):y("",!0)],512),[[_,!o.isRequest]]),zt,t("button",{onClick:e[15]||(e[15]=n=>o.step=1),class:"btn btn-danger w-100"},"กลับ")],512),[[_,o.step==2]]),b(t("div",null,[Kt,t("div",Ot,[t("p",null,[p("ยอดที่ต้องโอน "),t("span",Wt,a(s.toCurrency(o.deposit_amount+o.deposit_amount_float)),1),p(" บาท")]),t("div",Gt,[o.UserdataPayload.bankData?(c(),T(h,{key:0,bankData:o.UserdataPayload.bankData},null,8,["bankData"])):y("",!0)]),t("p",Ht,"กรุณาโอนภายใน "+a(o.countdown_time)+" วินาที",1),t("div",Jt,[t("div",{class:"progress-bar",style:w("width: "+o.countdown_time*100/180+"%")},a(o.countdown_time),5)])]),Xt,t("small",Yt,[p(" **กรุณาใช้บัญชี "),t("b",null,a(s.toBankFormat(r.userStore.userProfile.bankAccount))+" ("+a(r.userStore.userProfile.name+" "+r.userStore.userProfile.lastname)+")",1),p(" ในการโอนเงินเท่านั้นไม่เช่นนั้นเครดิตจะไม่เข้าบัญชี หากมีปัญหากรุณาติดต่อทีมงาน "),Zt]),t("button",{onClick:e[16]||(e[16]=n=>l.clearProcess()),class:"btn -submit w-100 mt-3"},"ยืนยันการโอน")],512),[[_,o.step==3]])])])])])]),$t,te,ee,se,oe])}const ie=g(X,[["render",ne],["__scopeId","data-v-57c7c7cb"]]);export{ie as default};
